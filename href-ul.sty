%%
%% This is file `href-ul.sty',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% href-ul.dtx  (with options: `package')
%% (The MIT License)
%% 
%% Copyright (c) 2021-2025 Yegor Bugayenko
%% 
%% Permission is hereby granted, free of charge, to any person obtaining a copy
%% of this software and associated documentation files (the 'Software'), to deal
%% in the Software without restriction, including without limitation the rights
%% to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
%% copies of the Software, and to permit persons to whom the Software is
%% furnished to do so, subject to the following conditions:
%% 
%% The above copyright notice and this permission notice shall be included in all
%% copies or substantial portions of the Software.
%% 
%% THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
%% IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
%% FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
%% AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
%% LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
%% OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
%% SOFTWARE.



\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{href-ul}
[2025/03/02 15.17.17 Underlined Hyperlinks]







\RequirePackage{pgfopts}
\pgfkeys{
  /href/.cd,
  plain/.store in=\href@plain
}
\ProcessPgfPackageOptions{/href}

\makeatletter
\ifdefined\href@plain\else
\PassOptionsToPackage{normalem}{ulem}
\RequirePackage{ulem}
\fi
\makeatother

\PassOptionsToPackage{hidelinks}{hyperref}
\PassOptionsToPackage{hyphens}{url}
\RequirePackage{hyperref}
\RequirePackage{url}

\makeatletter%
\begingroup%
\catcode`\$=6 %
\catcode`\#=12 %
\gdef\href@split$1#$2#$3\\$4{%
  \hyper@@link{$1}{$2}{%
    \ifdefined\href@plain$4\else\uline{$4}\fi}%
  \endgroup%
}%
\endgroup%

\let\href@orig\href
\renewcommand{\href}[2]{%
  \begingroup
  \urlstyle{same}%
  \def\UrlBreaks{\do\.\do\@\do\\\do\/\do\!\do\_\do\|\do\;\do\>\do\]%
    \do\)\do\,\do\?\do\'\do+\do\=\do\#\do\-}%
  \def\UrlBigBreaks{\do\:\do\/}%
  \href@orig{#1}{\sloppy\hyphenpenalty=500\relpenalty=500%
    \pretolerance=200\tolerance=900 #2}%
  \endgroup
}%
\makeatother%


\endinput
%%
%% End of file `href-ul.sty'.
